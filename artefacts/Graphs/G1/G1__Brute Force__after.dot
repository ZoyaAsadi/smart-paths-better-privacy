digraph G {
label="Open Library — After Brute Force (G1)";
graph [rankdir=LR, fontsize=10, labelloc=top, label="Open Library — Consent Graph (G0)"];
node [shape=box, fontsize=10];
edge [fontsize=9];
OutcomeTelemetry [label="Telemetry/Analytics running", color="#2b8a3e", shape=ellipse];
Entry -> BannerToast [label="show_banner"];
BannerToast -> Decline [label="click(decline)"];
BannerToast -> AcceptSelected [label="click(accept_selected)"];
BannerToast -> AcceptAll [label="click(accept_all)"];
BannerToast -> LetMeChoose [label="click(let_me_choose)"];
LetMeChoose -> Modal [label="open modal"];
Modal -> ToggleAll [label="toggle all (on/off)"];
Modal -> AccSecurity [label="toggle ON"];
Modal -> AccAnalytics [label="toggle ON"];
Modal -> AccExtMedia [label="toggle ON"];
Modal -> AccSupport [label="toggle ON"];
Modal -> AccPayments [label="toggle ON"];
Modal -> AccPersonal [label="toggle ON"];
Modal -> Save [label="click(save)"];
Home -> Manage [label="click(manage)"];
Discover -> Manage [label="click(manage)"];
SearchBooks -> Manage [label="click(manage)"];
Audiobooks -> Manage [label="click(manage)"];
DigitalMag -> Manage [label="click(manage)"];
Membership -> Manage [label="click(manage)"];
ContactUs -> Manage [label="click(manage)"];
Login -> Manage [label="click(manage)"];
Manage -> Modal [label="to(modal)"];
Home -> Discover [label="to(page)"];
Home -> SearchBooks [label="to(page)"];
Home -> Audiobooks [label="to(page)"];
Home -> DigitalMag [label="to(page)"];
Home -> Membership [label="to(page)"];
Home -> ContactUs [label="to(page)"];
Home -> Login [label="to(page)"];
Home -> AnalyticsSvc [label="requires(analytics)"];
Discover -> AnalyticsSvc [label="requires(analytics)"];
SearchBooks -> AnalyticsSvc [label="requires(analytics)"];
Audiobooks -> AnalyticsSvc [label="requires(analytics)"];
DigitalMag -> AnalyticsSvc [label="requires(analytics)"];
Membership -> AnalyticsSvc [label="requires(analytics)"];
ContactUs -> AnalyticsSvc [label="requires(analytics)"];
SearchBooks -> ExtMediaSvc [label="requires(external_media)"];
Audiobooks -> ExtMediaSvc [label="requires(external_media)"];
DigitalMag -> ExtMediaSvc [label="requires(external_media)"];
ContactUs -> SupportSvc [label="requires(support_chat)"];
Membership -> PaymentsSvc [label="requires(payments)"];
Home -> PersonalSvc [label="requires(personalization)"];
Discover -> PersonalSvc [label="requires(personalization)"];
Login -> SecuritySvc [label="requires(security)"];
ContactUs -> SecuritySvc [label="requires(security)"];
AcceptAll -> SecuritySvc;
AcceptAll -> AnalyticsSvc;
AcceptAll -> ExtMediaSvc;
AcceptAll -> SupportSvc;
AcceptAll -> PaymentsSvc;
AcceptAll -> PersonalSvc;
AcceptAll -> ConsentSaved;
Save -> SecuritySvc [label="selected? unlock"];
Save -> AnalyticsSvc [label="selected? unlock"];
Save -> ExtMediaSvc [label="selected? unlock"];
Save -> SupportSvc [label="selected? unlock"];
Save -> PaymentsSvc [label="selected? unlock"];
Save -> PersonalSvc [label="selected? unlock"];
Save -> ConsentSaved;
AccSecurity -> SecuritySvc;
AccAnalytics -> AnalyticsSvc;
AccExtMedia -> ExtMediaSvc;
AccSupport -> SupportSvc;
AccPayments -> PaymentsSvc;
AccPersonal -> PersonalSvc;
Essentials -> Out_BasicAccess;
{
SecuritySvc;
Login;
ContactUs;
} -> Out_SecuredLogin;
{
AnalyticsSvc;
} -> OutcomeTelemetry;
{
ExtMediaSvc;
} -> Out_AllMedia;
{
PaymentsSvc;
Membership;
} -> Out_Payments;
{
PersonalSvc;
Discover;
Home;
} -> Out_Personalized;
{
ExtMediaSvc;
SupportSvc;
PaymentsSvc;
PersonalSvc;
} -> Out_AllContent;
BannerToast -> Quick_ExtMedia [label="inline allow"];
BannerToast -> Quick_Payments [label="inline allow"];
BannerToast -> Quick_Personal [label="inline allow"];
BannerToast -> Quick_Security [label="inline allow"];
BannerToast -> Quick_Support [label="inline allow"];
Manage -> Quick_ExtMedia [label="inline allow"];
Manage -> Quick_Payments [label="inline allow"];
Manage -> Quick_Personal [label="inline allow"];
Manage -> Quick_Security [label="inline allow"];
Manage -> Quick_Support [label="inline allow"];
SearchBooks -> Quick_ExtMedia [label="play preview → prompt"];
Audiobooks -> Quick_ExtMedia [label="play audio → prompt"];
DigitalMag -> Quick_ExtMedia [label="open preview → prompt"];
Membership -> Quick_Payments [label="join → prompt"];
ContactUs -> Quick_Support [label="open chat → prompt"];
Login -> Quick_Security [label="login → prompt"];
Home -> Quick_Personal [label="see recommendations → prompt"];
Discover -> Quick_Personal [label="discover feed → prompt"];
Quick_Analytics -> AnalyticsSvc;
Quick_Analytics -> ConsentSaved;
Quick_ExtMedia -> ExtMediaSvc;
Quick_ExtMedia -> ConsentSaved;
Quick_Payments -> PaymentsSvc;
Quick_Payments -> ConsentSaved;
Quick_Personal -> PersonalSvc;
Quick_Personal -> ConsentSaved;
Quick_Security -> SecuritySvc;
Quick_Security -> ConsentSaved;
Quick_Support -> SupportSvc;
Quick_Support -> ConsentSaved;
}
